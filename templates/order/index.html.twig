{% extends 'base.html.twig' %}

{% block title %}Valider ma commande - {{ contact_company }}{% endblock %}

{% block content %}
<div class="container order-address">
<p class="h2">Valider ma commande</p>
    <div class="row justify-content-between">
        <div class="col-md-5">
            {% set formHtml %}
                {{ form_start(form, {action:path('order_recap')}) }}
                {{ form_label(form.addresses, 'Choisissez votre adresse de livraison') }}
                {{ form_end(form) }}
            {% endset %}

            {{ formHtml|replace({'[br]' : '<br/>'})|raw }}
            <p class="add-address"><a href="{{ path('account_address_add') }}">Ajouter une nouvelle adresse</a></p>
        </div>
        <div class="col-md-5">
            <p class="h3">Récapitulatif de la commande</p>
            {% for product in cart %}
            <div class="row">
                <div class="col-2 p-0"><img src="/uploads/{{ product.product.illustration }}" height="75px" alt="{{product.product.name}}"></div>
                <div class="col-6">{{product.product.name}}</div>
                <div class="col-2">x {{ product.quantity }}</div>
            </div>
            {% endfor %}
        </div>
        <div class="btn-checkout">
            <a href="{{ path('stripe_create_session', {'reference': reference}) }}" class="btn btn-main" id="checkout-button">Payer | {{ ((total / 100) + (carrier.price / 100))|number_format(2, ',', '.') }} €</a>
        </div>
    </div>
</div>

{% endblock %}
